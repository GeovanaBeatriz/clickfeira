<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Fornecedores | Gerenciar</title>
   <!-- Fontes e Estilos utilizados -->
  <!-- Font Awesome para ícones -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Bootstrap para estilização rápida -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Fonte Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- CSS do menu lateral -->
  <link rel="stylesheet" href="../styles/menu.css">
    <!-- CSS da página de fornecedores -->
  <link rel="stylesheet" href="../styles/fornecedores.css">
</head>
<body>
  <!-- Container do menu -->
  <div id="menu-container"></div>
  
  <div class="main-content-container">
    <div class="container-centralizado">
      <div class="row w-100 justify-content-center">
        <!-- Conteúdo Principal -->
        <div class="col-md-12 p-4">
          <!-- Lista de Fornecedores -->
          <section id="lista-fornecedores" class="panel active">
            <div class="card">
              <div class="card-header bg-white">
                <h2><b>Fornecedores</b> <span class="cinza">/ Gerenciar</span></h2>
              </div>
              <div class="card-body">
                <!-- Barra de Pesquisa e Botões -->
                <div class="search-bar">
                  <!-- Campo de pesquisa -->
                  <div class="input-icon">
                    <i class="fa fa-search"></i>
                    <input id="pesquisar-fornecedor" type="text" placeholder="Pesquisar">
                  </div>
                  <!-- Botão para abrir filtros -->
                  <button class="filter"><i class="fa fa-sliders"></i> <strong>Filtros</strong></button>
                  <!-- Botão para adicionar novo fornecedor -->
                  <button id="btn-adicionar" class="abrir-modal"><i class="fa fa-plus"></i> <strong>Adicionar</strong></button>
                </div>

                <!-- Menu de Filtros (escondido inicialmente) -->
                <div id="filtros-container" style="display: none; flex-direction: column; gap: 10px; margin-bottom: 20px;">
                  <!-- Filtro de ordenação -->
                  <div>
                    <label><strong>Ordenar por:</strong></label>
                    <select id="ordenar-nome">
                      <option value="">Ordenar</option>
                      <option value="az">Nome (A-Z)</option>
                      <option value="za">Nome (Z-A)</option>
                    </select>
                  </div>
                </div>

                <div class="table-responsive">
                  <table class="table table-sm table-hover">
                    <thead class="table-light">
                      <tr>
                        <th>Código</th>
                        <th>CNPJ/CPF</th>
                        <th>Fornecedor</th>
                        <th>Telefone</th>
                        <th class="text-center">Produtos</th>
                        <th class="text-center">Ações</th>
                      </tr>
                    </thead>
                    <tbody id="tabela-fornecedores">
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Adicionar Fornecedor -->
  <div id="modal-adicionar" class="modal-overlay">
    <div class="modal-content">
      <form id="form-adicionar">
        <center><h3>Adicionar Novo Fornecedor</h3></center>
        
        <div class="row g-2 mb-2">
          <div class="col-md-6">
            <label for="codigo">Código</label>
            <input id="codigo" class="form-control form-control-sm readonly-field" placeholder="Código" type="text" readonly/>
          </div>
          <div class="col-md-6">
            <label for="nome">Nome do Fornecedor</label>
            <input id="nome" class="form-control form-control-sm" placeholder="Nome do fornecedor" required/>
            <div id="nome-error" class="error-message">Nome é obrigatório (apenas letras e espaços)</div>
          </div>
        </div>
        <div class="row g-2 mb-2">
          <div class="col-md-6">
            <label for="cnpj">CNPJ/CPF</label>
            <input id="cnpj" class="form-control form-control-sm" placeholder="CNPJ/CPF" required/>
            <div id="cnpj-error" class="error-message">CNPJ/CPF inválido</div>
          </div>
          <div class="col-md-6">
            <label for="email">E-mail</label>
            <input id="email" class="form-control form-control-sm" placeholder="E-mail" type="email"/>
            <div id="email-error" class="error-message">E-mail inválido</div>
          </div>
        </div>
        <div class="row g-2 mb-2">
          <div class="col-md-6">
            <label for="cep">CEP</label>
            <input id="cep" class="form-control form-control-sm" placeholder="CEP"/>
          </div>
          <div class="col-md-6">
            <label for="telefone">Telefone</label>
            <input id="telefone" class="form-control form-control-sm" placeholder="Telefone" required/>
            <div id="telefone-error" class="error-message">Formato: (DDD) 99999-9999 ou (DDD) 9999-9999</div>
          </div>
        </div>
        <div class="mb-2">
          <label for="endereco">Endereço</label>
          <input id="endereco" class="form-control form-control-sm" placeholder="Endereço"/>
        </div>
        <div class="mb-3">
          <label for="produtos">Produtos Fornecidos</label>
          <select id="produtos" class="form-select form-select-sm">
            <option value="">Selecione os produtos</option>
            <option value="1">Frutas</option>
            <option value="2">Verduras</option>
            <option value="3">Legumes</option>
          </select>
        </div>
        
        <div class="modal-buttons">
          <button type="submit" class="salvar">Salvar</button>
          <button type="button" class="cancelar" id="btn-cancelar-adicionar">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal de Editar Fornecedor -->
  <div id="modal-editar" class="modal-overlay">
    <div class="modal-content">
      <form id="form-editar">
        <center><h3>Editar Fornecedor</h3></center>
        <input type="hidden" id="edit-id">
        
        <div class="row g-2 mb-2">
          <div class="col-md-6">
            <label for="edit-codigo">Código</label>
            <input id="edit-codigo" class="form-control form-control-sm readonly-field" placeholder="Código" readonly/>
          </div>
          <div class="col-md-6">
            <label for="edit-nome">Nome do Fornecedor</label>
            <input id="edit-nome" class="form-control form-control-sm" placeholder="Nome do fornecedor" required/>
            <div id="edit-nome-error" class="error-message">Nome é obrigatório (apenas letras e espaços)</div>
          </div>
        </div>
        <div class="row g-2 mb-2">
          <div class="col-md-6">
            <label for="edit-cnpj">CNPJ/CPF</label>
            <input id="edit-cnpj" class="form-control form-control-sm" placeholder="CNPJ/CPF" required/>
            <div id="edit-cnpj-error" class="error-message">CNPJ/CPF inválido</div>
          </div>
          <div class="col-md-6">
            <label for="edit-email">E-mail</label>
            <input id="edit-email" class="form-control form-control-sm" placeholder="E-mail" type="email"/>
            <div id="edit-email-error" class="error-message">E-mail inválido</div>
          </div>
        </div>
        <div class="row g-2 mb-2">
          <div class="col-md-6">
            <label for="edit-cep">CEP</label>
            <input id="edit-cep" class="form-control form-control-sm" placeholder="CEP"/>
          </div>
          <div class="col-md-6">
            <label for="edit-telefone">Telefone</label>
            <input id="edit-telefone" class="form-control form-control-sm" placeholder="Telefone" required/>
            <div id="edit-telefone-error" class="error-message">Formato: (DDD) 99999-9999 ou (DDD) 9999-9999</div>
          </div>
        </div>
        <div class="mb-2">
          <label for="edit-endereco">Endereço</label>
          <input id="edit-endereco" class="form-control form-control-sm" placeholder="Endereço"/>
        </div>
        <div class="mb-3">
          <label for="edit-produtos">Produtos Fornecidos</label>
          <select id="edit-produtos" class="form-select form-select-sm">
            <option value="">Selecione os produtos</option>
            <option value="1">Frutas</option>
            <option value="2">Verduras</option>
            <option value="3">Legumes</option>
          </select>
        </div>
        
        <div class="modal-buttons">
          <button type="submit" class="salvar">Salvar</button>
          <button type="button" class="cancelar" id="btn-cancelar-editar">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal de Visualizar Fornecedor -->
  <div id="modal-visualizar" class="modal-overlay">
    <div class="modal-content">
      <center><h3>Detalhes do Fornecedor</h3></center>
      
      <div class="visualizar-fornecedor">
        <div class="row mb-2">
          <div class="col-12">
            <div class="info-label">Código</div>
            <div class="info-value" id="view-codigo"></div>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-12">
            <div class="info-label">Nome</div>
            <div class="info-value" id="view-nome"></div>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-12">
            <div class="info-label">CNPJ/CPF</div>
            <div class="info-value" id="view-cnpj"></div>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-12">
            <div class="info-label">E-mail</div>
            <div class="info-value" id="view-email"></div>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-12">
            <div class="info-label">CEP</div>
            <div class="info-value" id="view-cep"></div>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-12">
            <div class="info-label">Telefone</div>
            <div class="info-value" id="view-telefone"></div>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-12">
            <div class="info-label">Endereço</div>
            <div class="info-value" id="view-endereco"></div>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-12">
            <div class="info-label">Produtos</div>
            <div class="info-value" id="view-produtos"></div>
          </div>
        </div>
        
        <div class="modal-buttons">
          <button type="button" class="cancelar" id="btn-voltar-visualizar">Fechar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Confirmação de Exclusão (Bootstrap) -->
  <div class="modal fade" id="modal-excluir" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body text-center py-4">
          <p>Deseja realmente excluir o fornecedor?</p>
          <p class="fw-bold" id="nome-fornecedor-excluir"></p>
          <p class="text-muted">Esta ação não poderá ser desfeita.</p>
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" id="btn-cancelar-exclusao" class="btn btn-outline-secondary btn-sm">
            Cancelar
          </button>
          <button type="button" id="btn-confirmar-exclusao" class="btn btn-danger btn-sm">
            Excluir
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Carregar Menu -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch('../components/menu.html') 
        .then(res => res.text())
        .then(html => {
          document.getElementById('menu-container').innerHTML = html;
        })
        .catch(err => console.error("Erro ao carregar menu:", err));
    });
  </script>
  <!-- Script principal -->
  <script src="../scripts/fornecedores.js"></script>
</body>
</html>